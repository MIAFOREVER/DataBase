# 论文阅读与前期工作总结
### 姓名：张XX，李XX…
### 学号：17XXXXXX，17XXXXXX…
---
## 前期工作

### 使用示意图展示普通文件IO方式(fwrite等)的流程，即进程与系统内核，磁盘之间的数据交换如何进行？为什么写入完成后要调用fsync？
XXXXXX
### 简述文件映射的方式如何操作文件。与普通IO区别？为什么写入完成后要调用msync？文件内容什么时候被载入内存？
(使用什么函数，函数的工作流程)  
XXXXXX

### 参考[Intel的NVM模拟教程](https://software.intel.com/zh-cn/articles/how-to-emulate-persistent-memory-on-an-intel-architecture-server)模拟NVM环境，用fio等工具测试模拟NVM的性能并与磁盘对比（关键步骤结果截图）。
首先建立`nvm`环境,然后是将`nvm`挂载到了`/mnt/pmemdir`目录下
```
mount -o dax /dev/pmem3 /mnt/pmemdir
```
然后安装`fio`,在ubuntu下的命令是:
```
apt-get install fio
```
首先我们测试`nvm`盘的速度，这里是指令
```
sudo fio -filename=/mnt/pmemdir/test -direct=1 -iodepth 1 -thread -rw=randrw -ioengine=psync -bs=16k -size=200M -numjobs=10 -runtime=1000 -group_reporting -name=fiotest
```
这里比较重要的参数是`rw=randrw`读写都是随即读写和`-size=200M`测试文件大小是200M.首先运行在`nvm`环境下,做了三组测试:
- 随机读
```
Run status group 0 (all jobs):
   READ: bw=10.1GiB/s (10.8GB/s), 10.1GiB/s-10.1GiB/s (10.8GB/s-10.8GB/s), io=2000MiB (2097MB), run=194-194msec
```
- 随机写
```
Run status group 0 (all jobs):
  WRITE: bw=6494MiB/s (6809MB/s), 6494MiB/s-6494MiB/s (6809MB/s-6809MB/s), io=2000MiB (2097MB), run=308-308msec
```
- 混合随机读写
```
Run status group 0 (all jobs):
   READ: bw=2324MiB/s (2437MB/s), 2324MiB/s-2324MiB/s (2437MB/s-2437MB/s), io=997MiB (1045MB), run=429-429msec
  WRITE: bw=2338MiB/s (2451MB/s), 2338MiB/s-2338MiB/s (2451MB/s-2451MB/s), io=1003MiB (1052MB), run=429-429msec
```
然后我们测试自己的硬盘，由于我电脑是SSD，所以速度较快.
- 随机读
```
Run status group 0 (all jobs):
   READ: bw=350MiB/s (367MB/s), 350MiB/s-350MiB/s (367MB/s-367MB/s), io=2000MiB (2097MB), run=5716-5716msec
```
- 随机写
```
Run status group 0 (all jobs):
  WRITE: bw=169MiB/s (177MB/s), 169MiB/s-169MiB/s (177MB/s-177MB/s), io=2000MiB (2097MB), run=11857-11857msec
```
- 混合随机读写
```
Run status group 0 (all jobs):
   READ: bw=49.4MiB/s (51.8MB/s), 49.4MiB/s-49.4MiB/s (51.8MB/s-51.8MB/s), io=997MiB (1045MB), run=20199-20199msec
  WRITE: bw=49.7MiB/s (52.1MB/s), 49.7MiB/s-49.7MiB/s (52.1MB/s-52.1MB/s), io=1003MiB (1052MB), run=20199-20199msec

```



### 使用[PMDK的libpmem库](http://pmem.io/pmdk/libpmem/)编写样例程序操作模拟NVM（关键实验结果截图，附上编译命令和简单样例程序）。
安装PMDK的步骤很简单，基本就是如下几步:
```
git clone https://github.com/pmem/pmdk.git
cd pmdk
make
sudo make install
```
`make install` 会把`.so`文件安装到`/usr/lib`的系统目录下,会把头文件安装到`/use/local/include`下，如果不加sudo权限不够</br>
下面是**编译样例**
这里我们编译的是`pmdk/src/examples/libpmem/full_copy.c`，使用如下命令
```
gcc full_copy.c -o full_copy -pthread -lpmem
```
这里需要链接两个动态链接库，分别是多线程的动态链接库和`libpmem.so`文件,然后我们测试一下


---
## 论文阅读

### 总结一下本文的主要贡献和观点(500字以内)(不能翻译摘要)。
（回答本文工作的动机背景是什么，做了什么，有什么技术原理，解决了什么问题，其意义是什么） 

XXXXXX

### SCM硬件有什么特性？与普通磁盘有什么区别？普通数据库以页的粒度读写磁盘的方式适合操作SCM吗？
XXXXXX
### 操作SCM为什么要调用CLFLUSH等指令？
(写入后不调用，发生系统崩溃有什么后果)  
XXXXXX

### FPTree的指纹技术有什么重要作用？
XXXXXX

### 为了保证指纹技术的数学证明成立，哈希函数应如何选取？
（哈希函数生成的哈希值具有什么特征，能简单对键值取模生成吗？）  
XXXXXX

### 持久化指针的作用是什么？与课上学到的什么类似？
XXXXXX
